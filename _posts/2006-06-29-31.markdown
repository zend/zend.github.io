---
layout: post
status: publish
published: true
title: 用PHP读取RSS内容，实现BLOG的同步调用
author:
  display_name: admin
  login: admin
  email: combbs@gmail.com
  url: http://seaprince.cn/
author_login: admin
author_email: combbs@gmail.com
author_url: http://seaprince.cn/
excerpt: ! "<p>以前，我们在首页调用，友情调用时，都喜欢用直接查询法和JS调用法，这都需要被调用一方配合才可以做到。<br />\r\n比如说JS调用，必须要有一个文件专门负责查询与返回所调用的数据。<br
  />\r\n这样的方式显然会受到很多限制。比如说，现在很多人都用新浪，博客中国等的博客站点提供的博客服务，这样用户就没有对博客所在的服务器的控制权，JS调用和直接查询法就会受到限制。<br
  />\r\n博客是web2.0的典范，就应该有web2.0的解决方案！<br />\r\n现在，几乎每一个博客都有自己的RSS聚合系统，针对RSS，我写了一个小程序，实现了BLOG的...</p>"
wordpress_id: 30
date: !binary |-
  MjAwNi0wNi0yOSAwMjoxMzo0NyArMDgwMA==
date_gmt: !binary |-
  MjAwNi0wNi0yOCAxODoxMzo0NyArMDgwMA==
categories:
- 脚本语言
tags:
- php
comments:
- id: 77
  author: mylaner
  author_email: mylaner.yu@gmail.com
  author_url: http://jiangyu.org.cn
  date: !binary |-
    MjAwOS0wNy0wNSAxNzo0NzoyNyArMDgwMA==
  date_gmt: !binary |-
    MjAwOS0wNy0wNSAwOTo0NzoyNyArMDgwMA==
  content: 试过没？能用吗？
---
<p>以前，我们在首页调用，友情调用时，都喜欢用直接查询法和JS调用法，这都需要被调用一方配合才可以做到。<br &#47;><br />
比如说JS调用，必须要有一个文件专门负责查询与返回所调用的数据。<br &#47;><br />
这样的方式显然会受到很多限制。比如说，现在很多人都用新浪，博客中国等的博客站点提供的博客服务，这样用户就没有对博客所在的服务器的控制权，JS调用和直接查询法就会受到限制。<br &#47;><br />
博客是web2.0的典范，就应该有web2.0的解决方案！<br &#47;><br />
现在，几乎每一个博客都有自己的RSS聚合系统，针对RSS，我写了一个小程序，实现了BLOG的同步调用。<&#47;p></p>
<div class="codeText">
<div class="codeHead">PHP代码<&#47;div></p>
<ol start="1" class="dp-c">
<li class="alt"><span><span><meta&nbsp;content=<&#47;span><span class="string">"text&#47;html;&nbsp;charset=utf-8"<&#47;span><span>&nbsp;http-equiv=<&#47;span><span class="string">"Content-Type"<&#47;span><span>>&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class=""><span><span class="comment">&#47;&#47;&nbsp;The&nbsp;file&nbsp;test.xml&nbsp;contains&nbsp;an&nbsp;XML&nbsp;document&nbsp;with&nbsp;a&nbsp;root&nbsp;element<&#47;span><span>&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class="alt"><span><span class="comment">&#47;&#47;&nbsp;and&nbsp;at&nbsp;least&nbsp;an&nbsp;element&nbsp;&#47;[root]&#47;title.<&#47;span><span>&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class=""><span><span class="vars">$xmlfile<&#47;span><span>&nbsp;=&nbsp;<&#47;span><span class="func">date<&#47;span><span>(<&#47;span><span class="string">'YmdH'<&#47;span><span>).<&#47;span><span class="string">'.xml'<&#47;span><span>;&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class="alt"><span><span class="vars">$sourcexml<&#47;span><span>&nbsp;=&nbsp;<&#47;span><span class="string">'http:&#47;&#47;blog.eaxi.com&#47;rss.xml'<&#47;span><span>;&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class=""><span><span class="comment">&#47;&#47;die($xmlfile);<&#47;span><span>&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class="alt"><span><span class="keyword">if<&#47;span><span>(&nbsp;!<&#47;span><span class="func">file_exists<&#47;span><span>(<&#47;span><span class="vars">$xmlfile<&#47;span><span>)&nbsp;)&nbsp;{&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class=""><span><span class="func">echo<&#47;span><span>&nbsp;<&#47;span><span class="string">'你是第一次访问本系统。正在初始化...'<&#47;span><span>;&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class="alt"><span><span class="vars">$str<&#47;span><span>&nbsp;=&nbsp;@file(<&#47;span><span class="vars">$sourcexml<&#47;span><span>)&nbsp;<&#47;span><span class="keyword">or<&#47;span><span>&nbsp;<&#47;span><span class="keyword">die<&#47;span><span>(<&#47;span><span class="string">'加载文件时出错。'<&#47;span><span>);&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class=""><span><span class="vars">$str<&#47;span><span>&nbsp;=&nbsp;join(<&#47;span><span class="string">''<&#47;span><span>,<&#47;span><span class="vars">$str<&#47;span><span>);&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class="alt"><span><span class="vars">$fp<&#47;span><span>&nbsp;=&nbsp;<&#47;span><span class="func">fopen<&#47;span><span>(<&#47;span><span class="vars">$xmlfile<&#47;span><span>,<&#47;span><span class="string">'w'<&#47;span><span>)&nbsp;<&#47;span><span class="keyword">or<&#47;span><span>&nbsp;<&#47;span><span class="keyword">die<&#47;span><span>(<&#47;span><span class="string">'写缓存失败!'<&#47;span><span>);&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class=""><span><span class="func">fputs<&#47;span><span>(<&#47;span><span class="vars">$fp<&#47;span><span>,<&#47;span><span class="vars">$str<&#47;span><span>);&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class="alt"><span>fclose(<span class="vars">$fp<&#47;span><span>);&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class=""><span><span class="func">echo<&#47;span><span>&nbsp;<&#47;span><span class="string">"初始化完毕。"<&#47;span><span>;&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class="alt"><span>}&nbsp;&nbsp;<&#47;span><&#47;li>
<li class=""><span><span class="keyword">if<&#47;span><span>&nbsp;(<&#47;span><span class="func">file_exists<&#47;span><span>(<&#47;span><span class="vars">$xmlfile<&#47;span><span>))&nbsp;{&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class="alt"><span><span class="vars">$xml<&#47;span><span>&nbsp;=&nbsp;simplexml_load_file(<&#47;span><span class="vars">$xmlfile<&#47;span><span>);&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class=""><span>&nbsp;&nbsp;<&#47;span><&#47;li>
<li class="alt"><span><span class="comment">&#47;&#47;print_r($xml);<&#47;span><span>&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class=""><span><span class="vars">$c<&#47;span><span>&nbsp;=&nbsp;&amp;<&#47;span><span class="vars">$xml<&#47;span><span>->channel;&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class="alt"><span><span class="func">echo<&#47;span><span>&nbsp;<&#47;span><span class="string">'<&#47;meta><&#47;span>&nbsp;<&#47;span><&#47;li>
<li class=""><span><span class="string"><&#47;code><&#47;p><&#47;span>&nbsp;<&#47;span><&#47;li>
<li class="alt"><span><span class="string"><br />
<h2><a&nbsp;title=""&nbsp;href="'<&#47;span><span>.<&#47;span><span class="vars">$c<&#47;span><span>->link.<&#47;span><span class="string">'">'<&#47;span><span>.<&#47;span><span class="vars">$c<&#47;span><span>->title.<&#47;span><span class="string">'<&#47;a><&#47;h2><&#47;span>&nbsp;<&#47;span><&#47;li></p>
<li class=""><span><span class="string">
<p>'<&#47;span><span>;&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li></p>
<li class="alt"><span><span class="func">echo<&#47;span><span>&nbsp;<&#47;span><span class="string">'<&#47;p><&#47;span>&nbsp;<&#47;span><&#47;li>
<li class=""><span><span class="string"><br />
<h5>'<&#47;span><span>.<&#47;span><span class="vars">$c<&#47;span><span>->lastBuildDate.<&#47;span><span class="string">'<&#47;h5><&#47;span>&nbsp;<&#47;span><&#47;li></p>
<li class="alt"><span><span class="string"><br />
<hr&nbsp;&#47;><&#47;span>&nbsp;<&#47;span><&#47;li></p>
<li class=""><span><span class="string">
<p>'<&#47;span><span>;&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li></p>
<li class="alt"><span><span class="vars">$listhead<&#47;span><span>&nbsp;=&nbsp;<&#47;span><span class="string">'<&#47;p><&#47;span>&nbsp;<&#47;span><&#47;li>
<li class=""><span><span class="string"><br />
<table&nbsp;border="1"><&#47;span>&nbsp;<&#47;span><&#47;li></p>
<li class="alt"><span><span class="string">&nbsp;&nbsp;&nbsp;<&#47;span>&nbsp;<&#47;span><&#47;li>
<li class=""><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;<br />
<tbody><&#47;span>&nbsp;<&#47;span><&#47;li></p>
<li class="alt"><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
<tr><&#47;span>&nbsp;<&#47;span><&#47;li></p>
<li class=""><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span>&nbsp;<&#47;span><&#47;li>
<li class="alt"><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<td>序号<&#47;td><&#47;span>&nbsp;<&#47;span><&#47;li></p>
<li class=""><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span>&nbsp;<&#47;span><&#47;li>
<li class="alt"><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<td>标题<&#47;td><&#47;span>&nbsp;<&#47;span><&#47;li></p>
<li class=""><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span>&nbsp;<&#47;span><&#47;li>
<li class="alt"><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<td>作者<&#47;td><&#47;span>&nbsp;<&#47;span><&#47;li></p>
<li class=""><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span>&nbsp;<&#47;span><&#47;li>
<li class="alt"><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<td>类别<&#47;td><&#47;span>&nbsp;<&#47;span><&#47;li></p>
<li class=""><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span>&nbsp;<&#47;span><&#47;li>
<li class="alt"><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<td>评论<&#47;td><&#47;span>&nbsp;<&#47;span><&#47;li></p>
<li class=""><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span>&nbsp;<&#47;span><&#47;li>
<li class="alt"><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<td>时间<&#47;td><&#47;span>&nbsp;<&#47;span><&#47;li></p>
<li class=""><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span>&nbsp;<&#47;span><&#47;li>
<li class="alt"><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;tr><&#47;span>&nbsp;<&#47;span><&#47;li>
<li class=""><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'<&#47;span><span>;&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="func">echo<&#47;span><span>&nbsp;<&#47;span><span class="vars">$listhead<&#47;span><span>;&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="vars">$k<&#47;span><span>&nbsp;=&nbsp;0;&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">foreach<&#47;span><span>(<&#47;span><span class="vars">$c<&#47;span><span>->item&nbsp;<&#47;span><span class="keyword">as<&#47;span><span>&nbsp;<&#47;span><span class="vars">$v<&#47;span><span>)&nbsp;{&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="vars">$k<&#47;span><span>&nbsp;++;&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="func">echo<&#47;span><span>&nbsp;<&#47;span><span class="string">"<&#47;span>&nbsp;<&#47;span><&#47;li>
<li class=""><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
<tr><&#47;span>&nbsp;<&#47;span><&#47;li></p>
<li class="alt"><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span>&nbsp;<&#47;span><&#47;li>
<li class=""><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<td>$k<&#47;td><&#47;span>&nbsp;<&#47;span><&#47;li></p>
<li class="alt"><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span>&nbsp;<&#47;span><&#47;li>
<li class=""><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<td><a&nbsp;title="<&#47;span><span class="vars">$v<&#47;span><span>->title<&#47;span><span class="string">"&nbsp;href="<&#47;span><span class="vars">$v<&#47;span><span>->link<&#47;span><span class="string">">$v->title<&#47;a><&#47;td><&#47;span>&nbsp;<&#47;span><&#47;li></p>
<li class="alt"><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span>&nbsp;<&#47;span><&#47;li>
<li class=""><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<td>$v->author<&#47;td><&#47;span>&nbsp;<&#47;span><&#47;li></p>
<li class="alt"><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span>&nbsp;<&#47;span><&#47;li>
<li class=""><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<td>$v->category<&#47;td><&#47;span>&nbsp;<&#47;span><&#47;li></p>
<li class="alt"><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span>&nbsp;<&#47;span><&#47;li>
<li class=""><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<td><a&nbsp;title="<&#47;span><span>点击发表评论<&#47;span><span class="string">"&nbsp;href="<&#47;span><span class="vars">$v<&#47;span><span>->comments<&#47;span><span class="string">">评论<&#47;a><&#47;td><&#47;span>&nbsp;<&#47;span><&#47;li></p>
<li class="alt"><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span>&nbsp;<&#47;span><&#47;li>
<li class=""><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<td>$v->pubDate<&#47;td><&#47;span>&nbsp;<&#47;span><&#47;li></p>
<li class="alt"><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span>&nbsp;<&#47;span><&#47;li>
<li class=""><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;tr><&#47;span>&nbsp;<&#47;span><&#47;li>
<li class="alt"><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<&#47;span><span>;&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;<&#47;span><&#47;li>
<li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="func">echo<&#47;span><span>&nbsp;<&#47;span><span class="string">'<&#47;span>&nbsp;<&#47;span><&#47;li>
<li class=""><span><span class="string">&nbsp;&nbsp;&nbsp;&nbsp;<&#47;tbody><&#47;span>&nbsp;<&#47;span><&#47;li>
<li class="alt"><span><span class="string"><&#47;table><&#47;span>&nbsp;<&#47;span><&#47;li>
<li class=""><span><span class="string">
<p>'<&#47;span><span>;&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li></p>
<li class="alt"><span>}&nbsp;<span class="keyword">else<&#47;span><span>&nbsp;{&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class=""><span><span class="func">exit<&#47;span><span>(<&#47;span><span class="string">'Failed&nbsp;to&nbsp;open&nbsp;xml&nbsp;file.'<&#47;span><span>);&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class="alt"><span>}&nbsp;&nbsp;<&#47;span><&#47;li>
<li class=""><span>?>&nbsp;&nbsp;<&#47;span><&#47;li><br />
<&#47;ol><br />
<&#47;div></p>
<p><br &#47;><br />
<br &#47;><br />
注意：只能在PHP5环境下使用！<&#47;p><&#47;p></p>
