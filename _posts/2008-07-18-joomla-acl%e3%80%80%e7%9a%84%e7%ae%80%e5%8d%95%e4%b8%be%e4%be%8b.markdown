---
layout: post
status: publish
published: true
title: Joomla ACL　的简单举例
author:
  display_name: admin
  login: admin
  email: combbs@gmail.com
  url: http://seaprince.cn/
author_login: admin
author_email: combbs@gmail.com
author_url: http://seaprince.cn/
excerpt: <p>在Joomla component开发中，经常会用到系统级别的权限控制，ACL就是做这个用处的。</p>
wordpress_id: 208
date: !binary |-
  MjAwOC0wNy0xOCAxNDozOToyNiArMDgwMA==
date_gmt: !binary |-
  MjAwOC0wNy0xOCAwNjozOToyNiArMDgwMA==
categories:
- 脚本语言
tags:
- joomla
comments: []
---
<p>在Joomla component开发中，经常会用到系统级别的权限控制，ACL就是做这个用处的。<&#47;p></p>
<p>这里举一个小例子，展示Joomla ACL的使用方法，仅当备忘。<&#47;p></p>
<div class="codeText">
<div class="codeHead">PHP代码<&#47;div></p>
<ol class="dp-c">
<li class="alt"><span><span class="vars">$acl<&#47;span><span>&nbsp;=&nbsp;&amp;JFactory::getACL(); &nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class=""><span class="vars">$acl<&#47;span><span>->addACL(&nbsp;<&#47;span><span class="string">'com_swimtool'<&#47;span><span>,&nbsp;<&#47;span><span class="string">'manage'<&#47;span><span>,&nbsp;<&#47;span><span class="string">'users'<&#47;span><span>,&nbsp;<&#47;span><span class="string">'super&nbsp;administrator'<&#47;span><span>&nbsp;); &nbsp;&nbsp;<&#47;span><&#47;li>
<li class="alt"><span class="comment">&#47;&#47;$acl->addACL(&nbsp;'com_swimtool',&nbsp;'manage',&nbsp;'users',&nbsp;'administrator'&nbsp;); <&#47;span><span>&nbsp;&nbsp;<&#47;span><&#47;li>
<li class=""><span class="comment">&#47;&#47;$acl->addACL(&nbsp;'com_swimtool',&nbsp;'manage',&nbsp;'users',&nbsp;'manager'&nbsp;); <&#47;span><span>&nbsp;&nbsp;<&#47;span><&#47;li>
<li class="alt"><span>&nbsp;&nbsp;<&#47;span><&#47;li>
<li class=""><span class="vars">$user<&#47;span><span>&nbsp;=&nbsp;&amp;&nbsp;JFactory::getUser(); &nbsp;&nbsp;<&#47;span><&#47;li>
<li class="alt"><span class="keyword">if<&#47;span><span>&nbsp;(!<&#47;span><span class="vars">$user<&#47;span><span>->authorize(&nbsp;<&#47;span><span class="string">'com_swimtool'<&#47;span><span>,&nbsp;<&#47;span><span class="string">'manage'<&#47;span><span>&nbsp;))&nbsp;{ &nbsp;&nbsp;<&#47;span><&#47;li>
<li class=""><span>&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="vars">$mainframe<&#47;span><span>->redirect(<&#47;span><span class="string">'index.php'<&#47;span><span>,&nbsp;JText::_(<&#47;span><span class="string">'ALERTNOTAUTH'<&#47;span><span>)); &nbsp;&nbsp;<&#47;span><&#47;li>
<li class="alt"><span>} &nbsp;&nbsp;<&#47;span><&#47;li><br />
<&#47;ol><br />
<&#47;div></p>
<p>这里，先用JFactory获取ACL的对象，再添加ACL规则，最后验证，验证失败则给出失败信息，不允许访问资源。<&#47;p></p>
