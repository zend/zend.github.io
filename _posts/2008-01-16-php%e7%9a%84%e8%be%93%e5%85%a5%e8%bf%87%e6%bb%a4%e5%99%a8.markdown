---
layout: post
status: publish
published: true
title: PHP的输入过滤器
author:
  display_name: admin
  login: admin
  email: combbs@gmail.com
  url: http://seaprince.cn/
author_login: admin
author_email: combbs@gmail.com
author_url: http://seaprince.cn/
wordpress_id: 171
date: !binary |-
  MjAwOC0wMS0xNiAwODo0ODoyMCArMDgwMA==
date_gmt: !binary |-
  MjAwOC0wMS0xNiAwMDo0ODoyMCArMDgwMA==
categories:
- 脚本语言
tags:
- php
comments: []
---
<div class="codeText">
<div class="codeHead">PHP代码<&#47;div></p>
<ol start="1" class="dp-c">
<li class="alt"><span><span><?php&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class=""><span><span class="vars">$result<&#47;span><span>&nbsp;=&nbsp;filter_input(INPUT_GET,&nbsp;<&#47;span><span class="string">'email'<&#47;span><span>,&nbsp;FILTER_VALIDATE_EMAIL);&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class="alt"><span>var_dump(<span class="vars">$result<&#47;span><span>);&nbsp;&nbsp;<&#47;span><&#47;span><&#47;li>
<li class=""><span>?>&nbsp;&nbsp;<&#47;span><&#47;li><br />
<&#47;ol><br />
<&#47;div></p>
<div class="section">
<h1 class="section"><a name="filter.intro">简介<&#47;a><&#47;h1></p>
<p>This extension serves for validating and filtering data coming usually from  some insecure source such as user input.<&#47;p></p>
<p>该扩展用于检验和过滤来自不安全途径的数据，比如说用户的输入。<&#47;p></p>
<p>The following filters currently exist, be sure to read the Filter Constants section for  information that describes the behavior of each constant:<&#47;p></p>
<p>下边这些过滤器是当前已经有的，请阅读过滤器常量小节查看各个常量的行为描述。<&#47;p></p>
<div class="table"><a name="AEN55075"><&#47;a></p>
<p><strong>表 1. Existing filters<&#47;strong><&#47;p></p>
<table border="1" class="CALSTABLE">
<colgroup>
<col><&#47;col><br />
<col><&#47;col><br />
<col><&#47;col><br />
<col><&#47;col> <&#47;colgroup></p>
<thead>
<tr>
<th>ID<&#47;th></p>
<th>Name<&#47;th></p>
<th>Options<&#47;th></p>
<th>Flags<&#47;th></p>
<th>Description<&#47;th><br />
        <&#47;tr><br />
    <&#47;thead></p>
<tbody>
<tr>
<td><tt class="constant"><strong>FILTER_VALIDATE_INT<&#47;strong><&#47;tt><&#47;td></p>
<td>"int"<&#47;td></p>
<td><code class="parameter">min_range<&#47;code>, <code class="parameter">max_range<&#47;code><&#47;td></p>
<td><tt class="constant"><strong>FILTER_FLAG_ALLOW_OCTAL<&#47;strong><&#47;tt>, <tt class="constant"><strong>FILTER_FLAG_ALLOW_HEX<&#47;strong><&#47;tt><&#47;td></p>
<td>Validates value as integer, optionally from the specified range.<&#47;td><br />
        <&#47;tr></p>
<tr>
<td><tt class="constant"><strong>FILTER_VALIDATE_BOOLEAN<&#47;strong><&#47;tt><&#47;td></p>
<td>"boolean"<&#47;td></p>
<td>&nbsp;<&#47;td></p>
<td>&nbsp;<&#47;td></p>
<td>Returns <tt class="constant"><strong>TRUE<&#47;strong><&#47;tt> for "1", "true", "on" and "yes",  <tt class="constant"><strong>FALSE<&#47;strong><&#47;tt> for "0", "false", "off", "no", and "", <tt class="constant"><strong>NULL<&#47;strong><&#47;tt> otherwise.<&#47;td><br />
        <&#47;tr></p>
<tr>
<td><tt class="constant"><strong>FILTER_VALIDATE_FLOAT<&#47;strong><&#47;tt><&#47;td></p>
<td>"float"<&#47;td></p>
<td>&nbsp;<&#47;td></p>
<td>&nbsp;<&#47;td></p>
<td>Validates value as float.<&#47;td><br />
        <&#47;tr></p>
<tr>
<td><tt class="constant"><strong>FILTER_VALIDATE_REGEXP<&#47;strong><&#47;tt><&#47;td></p>
<td>"validate_regexp"<&#47;td></p>
<td><code class="parameter">regexp<&#47;code><&#47;td></p>
<td>&nbsp;<&#47;td></p>
<td>Validates value against <code class="parameter">regexp<&#47;code>, a <a href="ref.pcre.html">Perl-compatible<&#47;a> regular expression.<&#47;td><br />
        <&#47;tr></p>
<tr>
<td><tt class="constant"><strong>FILTER_VALIDATE_URL<&#47;strong><&#47;tt><&#47;td></p>
<td>"validate_url"<&#47;td></p>
<td>&nbsp;<&#47;td></p>
<td><tt class="constant"><strong>FILTER_FLAG_SCHEME_REQUIRED<&#47;strong><&#47;tt>, <tt class="constant"><strong>FILTER_FLAG_HOST_REQUIRED<&#47;strong><&#47;tt>, <tt class="constant"><strong>FILTER_FLAG_PATH_REQUIRED<&#47;strong><&#47;tt>, <tt class="constant"><strong>FILTER_FLAG_QUERY_REQUIRED<&#47;strong><&#47;tt><&#47;td></p>
<td>Validates value as URL, optionally with required components.<&#47;td><br />
        <&#47;tr></p>
<tr>
<td><tt class="constant"><strong>FILTER_VALIDATE_EMAIL<&#47;strong><&#47;tt><&#47;td></p>
<td>"validate_email"<&#47;td></p>
<td>&nbsp;<&#47;td></p>
<td>&nbsp;<&#47;td></p>
<td>Validates value as e-mail.<&#47;td><br />
        <&#47;tr></p>
<tr>
<td><tt class="constant"><strong>FILTER_VALIDATE_IP<&#47;strong><&#47;tt><&#47;td></p>
<td>"validate_ip"<&#47;td></p>
<td>&nbsp;<&#47;td></p>
<td><tt class="constant"><strong>FILTER_FLAG_IPV4<&#47;strong><&#47;tt>, <tt class="constant"><strong>FILTER_FLAG_IPV6<&#47;strong><&#47;tt>, <tt class="constant"><strong>FILTER_FLAG_NO_PRIV_RANGE<&#47;strong><&#47;tt>, <tt class="constant"><strong>FILTER_FLAG_NO_RES_RANGE<&#47;strong><&#47;tt><&#47;td></p>
<td>Validates value as IP address, optionally only IPv4 or IPv6 or not from  private or reserved ranges.<&#47;td><br />
        <&#47;tr></p>
<tr>
<td><tt class="constant"><strong>FILTER_SANITIZE_STRING<&#47;strong><&#47;tt><&#47;td></p>
<td>"string"<&#47;td></p>
<td>&nbsp;<&#47;td></p>
<td><tt class="constant"><strong>FILTER_FLAG_NO_ENCODE_QUOTES<&#47;strong><&#47;tt>, <tt class="constant"><strong>FILTER_FLAG_STRIP_LOW<&#47;strong><&#47;tt>, <tt class="constant"><strong>FILTER_FLAG_STRIP_HIGH<&#47;strong><&#47;tt>, <tt class="constant"><strong>FILTER_FLAG_ENCODE_LOW<&#47;strong><&#47;tt>, <tt class="constant"><strong>FILTER_FLAG_ENCODE_HIGH<&#47;strong><&#47;tt>, <tt class="constant"><strong>FILTER_FLAG_ENCODE_AMP<&#47;strong><&#47;tt><&#47;td></p>
<td>Strip tags, optionally strip or encode special characters.<&#47;td><br />
        <&#47;tr></p>
<tr>
<td><tt class="constant"><strong>FILTER_SANITIZE_STRIPPED<&#47;strong><&#47;tt><&#47;td></p>
<td>"stripped"<&#47;td></p>
<td>&nbsp;<&#47;td></p>
<td>&nbsp;<&#47;td></p>
<td>Alias of "string" filter.<&#47;td><br />
        <&#47;tr></p>
<tr>
<td><tt class="constant"><strong>FILTER_SANITIZE_ENCODED<&#47;strong><&#47;tt><&#47;td></p>
<td>"encoded"<&#47;td></p>
<td>&nbsp;<&#47;td></p>
<td><tt class="constant"><strong>FILTER_FLAG_STRIP_LOW<&#47;strong><&#47;tt>, <tt class="constant"><strong>FILTER_FLAG_STRIP_HIGH<&#47;strong><&#47;tt>, <tt class="constant"><strong>FILTER_FLAG_ENCODE_LOW<&#47;strong><&#47;tt>, <tt class="constant"><strong>FILTER_FLAG_ENCODE_HIGH<&#47;strong><&#47;tt><&#47;td></p>
<td>URL-encode string, optionally strip or encode special characters.<&#47;td><br />
        <&#47;tr></p>
<tr>
<td><tt class="constant"><strong>FILTER_SANITIZE_SPECIAL_CHARS<&#47;strong><&#47;tt><&#47;td></p>
<td>"special_chars"<&#47;td></p>
<td>&nbsp;<&#47;td></p>
<td><tt class="constant"><strong>FILTER_FLAG_STRIP_LOW<&#47;strong><&#47;tt>, <tt class="constant"><strong>FILTER_FLAG_STRIP_HIGH<&#47;strong><&#47;tt>, <tt class="constant"><strong>FILTER_FLAG_ENCODE_HIGH<&#47;strong><&#47;tt><&#47;td></p>
<td>HTML-escape <tt class="literal">'"<>&amp;<&#47;tt> and characters with ASCII  value less than 32, optionally strip or encode other special characters.<&#47;td><br />
        <&#47;tr></p>
<tr>
<td><tt class="constant"><strong>FILTER_UNSAFE_RAW<&#47;strong><&#47;tt><&#47;td></p>
<td>"unsafe_raw"<&#47;td></p>
<td>&nbsp;<&#47;td></p>
<td><tt class="constant"><strong>FILTER_FLAG_STRIP_LOW<&#47;strong><&#47;tt>, <tt class="constant"><strong>FILTER_FLAG_STRIP_HIGH<&#47;strong><&#47;tt>, <tt class="constant"><strong>FILTER_FLAG_ENCODE_LOW<&#47;strong><&#47;tt>, <tt class="constant"><strong>FILTER_FLAG_ENCODE_HIGH<&#47;strong><&#47;tt>, <tt class="constant"><strong>FILTER_FLAG_ENCODE_AMP<&#47;strong><&#47;tt><&#47;td></p>
<td>Do nothing, optionally strip or encode special characters.<&#47;td><br />
        <&#47;tr></p>
<tr>
<td><tt class="constant"><strong>FILTER_SANITIZE_EMAIL<&#47;strong><&#47;tt><&#47;td></p>
<td>"email"<&#47;td></p>
<td>&nbsp;<&#47;td></p>
<td>&nbsp;<&#47;td></p>
<td>Remove all characters except letters, digits and <tt class="literal">!#$%&amp;'*+-&#47;=?^_`{|}~@.[]<&#47;tt>.<&#47;td><br />
        <&#47;tr></p>
<tr>
<td><tt class="constant"><strong>FILTER_SANITIZE_URL<&#47;strong><&#47;tt><&#47;td></p>
<td>"url"<&#47;td></p>
<td>&nbsp;<&#47;td></p>
<td>&nbsp;<&#47;td></p>
<td>Remove all characters except letters, digits and <tt class="literal">$-_.+!*'(),{}|\\^~[]`<>#%";&#47;?:@&amp;=<&#47;tt>.<&#47;td><br />
        <&#47;tr></p>
<tr>
<td><tt class="constant"><strong>FILTER_SANITIZE_NUMBER_INT<&#47;strong><&#47;tt><&#47;td></p>
<td>"number_int"<&#47;td></p>
<td>&nbsp;<&#47;td></p>
<td>&nbsp;<&#47;td></p>
<td>Remove all characters except digits and <tt class="literal">+-<&#47;tt>.<&#47;td><br />
        <&#47;tr></p>
<tr>
<td><tt class="constant"><strong>FILTER_SANITIZE_NUMBER_FLOAT<&#47;strong><&#47;tt><&#47;td></p>
<td>"number_float"<&#47;td></p>
<td>&nbsp;<&#47;td></p>
<td><tt class="constant"><strong>FILTER_FLAG_ALLOW_FRACTION<&#47;strong><&#47;tt>, <tt class="constant"><strong>FILTER_FLAG_ALLOW_THOUSAND<&#47;strong><&#47;tt>, <tt class="constant"><strong>FILTER_FLAG_ALLOW_SCIENTIFIC<&#47;strong><&#47;tt><&#47;td></p>
<td>Remove all characters except digits, <tt class="literal">+-<&#47;tt> and  optionally <tt class="literal">.,eE<&#47;tt>.<&#47;td><br />
        <&#47;tr></p>
<tr>
<td><tt class="constant"><strong>FILTER_SANITIZE_MAGIC_QUOTES<&#47;strong><&#47;tt><&#47;td></p>
<td>"magic_quotes"<&#47;td></p>
<td>&nbsp;<&#47;td></p>
<td>&nbsp;<&#47;td></p>
<td>Apply <a href="function.addslashes.html"><strong class="function">addslashes()<&#47;strong><&#47;a>.<&#47;td><br />
        <&#47;tr></p>
<tr>
<td><tt class="constant"><strong>FILTER_CALLBACK<&#47;strong><&#47;tt><&#47;td></p>
<td>"callback"<&#47;td></p>
<td>&nbsp;<&#47;td></p>
<td><a href="language.pseudo-types.html#language.types.callback"><strong class="type">callback<&#47;strong><&#47;a> function or method<&#47;td></p>
<td>Call user-defined function to filter data.<&#47;td><br />
        <&#47;tr><br />
    <&#47;tbody><br />
<&#47;table><br />
<&#47;div><br />
<&#47;div></p>
<div class="section"><font size="2"><br &#47;><br />
可以通过php.ini查看是否支持filter.<br &#47;><br />
<&#47;font></p>
<h2><a name="module_filter">filter<&#47;a><&#47;h2></p>
<table width="600" cellpadding="3" border="0">
<tbody>
<tr>
<td class="e">Input Validation and Filtering<&#47;td></p>
<td class="v">enabled<&#47;td><br />
        <&#47;tr></p>
<tr>
<td class="e">Revision<&#47;td></p>
<td class="v">$Revision: 1.52.2.39 $<&#47;td><br />
        <&#47;tr><br />
    <&#47;tbody><br />
<&#47;table><br />
<br &#47;></p>
<table width="600" cellpadding="3" border="0">
<tbody>
<tr class="h">
<th>Directive<&#47;th></p>
<th>Local Value<&#47;th></p>
<th>Master Value<&#47;th><br />
        <&#47;tr></p>
<tr>
<td class="e">filter.default<&#47;td></p>
<td class="v">unsafe_raw<&#47;td></p>
<td class="v">unsafe_raw<&#47;td><br />
        <&#47;tr></p>
<tr>
<td class="e">filter.default_flags<&#47;td></p>
<td class="v"><em>no value<&#47;em><&#47;td></p>
<td class="v"><em>no value<&#47;em><&#47;td><br />
        <&#47;tr><br />
    <&#47;tbody><br />
<&#47;table><br />
<br &#47;><br />
使用：<br &#47;><br />
参考本文前边的例子，用 ?email=email@host.com 和 ?email=invalidemail.address 测试。</p>
<h1 class="section"><a name="filter.requirements"><&#47;a><&#47;h1></p>
<h1 class="section"><a name="filter.requirements"><&#47;a><&#47;h1></p>
<h1 class="section"><a name="filter.requirements"><&#47;a><&#47;h1><br />
<&#47;div></p>
