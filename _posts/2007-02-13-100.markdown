---
layout: post
status: publish
published: true
title: Javascript 中cookie的一个完整应用
author:
  display_name: admin
  login: admin
  email: combbs@gmail.com
  url: http://seaprince.cn/
author_login: admin
author_email: combbs@gmail.com
author_url: http://seaprince.cn/
excerpt: 用Javascript+css+cookie实现的一个菜单。
wordpress_id: 91
date: !binary |-
  MjAwNy0wMi0xMyAxMDozNzozMyArMDgwMA==
date_gmt: !binary |-
  MjAwNy0wMi0xMyAwMjozNzozMyArMDgwMA==
categories:
- 脚本语言
tags:
- javascript
comments: []
---
<p>[php]<br />
<style type="text&#47;css">
<p>.menu_cur {background-color: red;display:inline; border:#ccc solid 1px;width:100px;text-align:center;cursor:pointer;}<br />
.menu	  {background-color: white;display:inline; border:#ccc solid 1px;width:100px;text-align:center;cursor:pointer;}<&#47;style></p>
<ul>
<li class="menu" id="menu7" onclick="menu_click(this)" name="menu">&nbsp; <&#47;li><br />
<&#47;ul><br />
<script type="text&#47;javascript"><br />
<!--<br />
function $(id) {return document.getElementById(id);}<br />
function menu_click(obj) {<br />
	var lis=document.getElementsByTagName('li');<br />
	var i =0;<br />
	for(i=0;i
<lis.length;i++) {<br />
		lis[i].className = 'menu';<br />
	}<br />
	obj.className = 'menu_cur';<br />
	setCookie('menu_cur',obj.id);<br />
	cur = getCookie('menu_cur');<br />
	$('i').innerHTML = 'cookie: '+cur;<br />
}<br />
function init() {<br />
	cur = getCookie('menu_cur');<br />
	$('i').innerHTML = 'cookie: '+cur;<br />
	n = document.getElementById(cur);<br />
	if(n != null) {<br />
		menu_click(n);<br />
	}<br />
}<br />
&#47;*** cookie ***&#47;<br />
function setCookie(name, value) {<br />
  document.cookie = name + "=" + escape(value);<br />
}</p>
<p>function getCookie(Name) {<br />
 var search = Name + "="<br />
 if(document.cookie.length > 0) {<br />
   offset = document.cookie.indexOf(search)<br />
   if(offset != -1) {<br />
     offset += search.length<br />
     end = document.cookie.indexOf(";", offset)<br />
     if(end == -1) end = document.cookie.length<br />
     return unescape(document.cookie.substring(offset, end))<br />
   }<br />
   else return ""<br />
 }<br />
}<br />
&#47;**************&#47;<br />
&#47;&#47;--><br />
<&#47;script></p>
<div id="i"><&#47;div></p>
<p>
<style><br &#47;>.menu_cur {background-color: red;display:inline; border:#ccc solid 1px;width:100px;text-align:center;cursor:pointer;}<br &#47;>.menu&nbsp;&nbsp; {background-color: white;display:inline; border:#ccc solid 1px;width:100px;text-align:center;cursor:pointer;}<br &#47;><&#47;style><br &#47;>
<ul><br &#47;>&nbsp;
<li class='menu' name='menu' id='menu1' onclick='menu_click(this)'>dsfdsf<&#47;li><br &#47;>&nbsp;
<li class='menu' name='menu' id='menu2' onclick='menu_click(this)'>fdsfd<&#47;li><br &#47;>&nbsp;
<li class='menu' name='menu' id='menu3' onclick='menu_click(this)'>fsdf<&#47;li><br &#47;>&nbsp;
<li class='menu' name='menu' id='menu4' onclick='menu_click(this)'>fdsf<&#47;li><br &#47;>&nbsp;
<li class='menu' name='menu' id='menu5' onclick='menu_click(this)'>erwq<&#47;li><br &#47;>&nbsp;
<li class='menu_cur' name='menu' id='menu6' onclick='menu_click(this)'>4324<&#47;li><br &#47;>&nbsp;
<li class='menu' name='menu' id='menu7' onclick='menu_click(this)'>657676<&#47;li><br &#47;><&#47;ul><br &#47;><script type="text&#47;javascript"><br &#47;><!--<br &#47;>function $(id) {return document.getElementById(id);}<br &#47;>function menu_click(obj) {<br &#47;>&nbsp;var lis=document.getElementsByTagName('li');<br &#47;>&nbsp;var i =0;<br &#47;>&nbsp;for(i=0;i
<lis.length;i++) {<br &#47;>&nbsp;&nbsp;if(lis[i].name=='menu')lis[i].className = 'menu';<br &#47;>&nbsp;}<br &#47;>&nbsp;obj.className = 'menu_cur';<br &#47;>&nbsp;setCookie('menu_cur',obj.id);<br &#47;>&nbsp;cur = getCookie('menu_cur');<br &#47;>&nbsp;$('i').innerHTML = 'cookie: '+cur;<br &#47;>}<br &#47;>function init() {<br &#47;>&nbsp;cur = getCookie('menu_cur');<br &#47;>&nbsp;$('i').innerHTML = 'cookie: '+cur;<br &#47;>&nbsp;n = document.getElementById(cur);<br &#47;>&nbsp;if(n != null) {<br &#47;>&nbsp;&nbsp;menu_click(n);<br &#47;>&nbsp;}<br &#47;>}<br &#47;>&#47;*** cookie ***&#47;<br &#47;>function setCookie(name, value) {<br &#47;>&nbsp; document.cookie = name + "=" + escape(value);<br &#47;>}<&#47;p></p>
<p>function getCookie(Name) {<br &#47;>&nbsp;var search = Name + "="<br &#47;>&nbsp;if(document.cookie.length > 0) {<br &#47;>&nbsp;&nbsp; offset = document.cookie.indexOf(search)<br &#47;>&nbsp;&nbsp; if(offset != -1) {<br &#47;>&nbsp;&nbsp;&nbsp;&nbsp; offset += search.length<br &#47;>&nbsp;&nbsp;&nbsp;&nbsp; end = document.cookie.indexOf(";", offset)<br &#47;>&nbsp;&nbsp;&nbsp;&nbsp; if(end == -1) end = document.cookie.length<br &#47;>&nbsp;&nbsp;&nbsp;&nbsp; return unescape(document.cookie.substring(offset, end))<br &#47;>&nbsp;&nbsp; }<br &#47;>&nbsp;&nbsp; else return ""<br &#47;>&nbsp;}<br &#47;>}<br &#47;>&#47;**************&#47;<br &#47;>&#47;&#47;--><br &#47;><&#47;script><br &#47;><body onload='init()'><br &#47;>
<div id='i'><&#47;div><&#47;p></p>
<p>[&#47;php] <&#47;p></p>
<p>效果：<br />
<style type="text&#47;css">
<p>.menu_cur {background-color: red;display:inline; border:#ccc solid 1px;width:100px;text-align:center;cursor:pointer;}<br />
.menu	  {background-color: white;display:inline; border:#ccc solid 1px;width:100px;text-align:center;cursor:pointer;}<&#47;style><&#47;p></p>
<ul>
<li class="menu" id="menu1" onclick="menu_click(this)" name="menu">dsfdsf <&#47;li>
<li class="menu" id="menu2" onclick="menu_click(this)" name="menu">fdsfd <&#47;li>
<li class="menu" id="menu3" onclick="menu_click(this)" name="menu">fsdf <&#47;li>
<li class="menu" id="menu4" onclick="menu_click(this)" name="menu">fdsf <&#47;li>
<li class="menu" id="menu5" onclick="menu_click(this)" name="menu">erwq <&#47;li>
<li class="menu_cur" id="menu6" onclick="menu_click(this)" name="menu">4324 <&#47;li>
<li class="menu" id="menu7" onclick="menu_click(this)" name="menu">657676 <&#47;li><br />
<&#47;ul><br />
<script type="text&#47;javascript"><br />
<!--<br />
function $(id) {return document.getElementById(id);}<br />
function menu_click(obj) {<br />
	var lis=document.getElementsByTagName('li');<br />
	var i =0;<br />
	for(i=0;i
<lis.length;i++) {<br />
		if(lis[i].name=='menu')lis[i].className = 'menu';<br />
	}<br />
	obj.className = 'menu_cur';<br />
	setCookie('menu_cur',obj.id);<br />
	cur = getCookie('menu_cur');<br />
	$('i').innerHTML = 'cookie: '+cur;<br />
}<br />
function init() {<br />
	cur = getCookie('menu_cur');<br />
	$('i').innerHTML = 'cookie: '+cur;<br />
	n = document.getElementById(cur);<br />
	if(n != null) {<br />
		menu_click(n);<br />
	}<br />
}<br />
&#47;*** cookie ***&#47;<br />
function setCookie(name, value) {<br />
  document.cookie = name + "=" + escape(value);<br />
}</p>
<p>function getCookie(Name) {<br />
 var search = Name + "="<br />
 if(document.cookie.length > 0) {<br />
   offset = document.cookie.indexOf(search)<br />
   if(offset != -1) {<br />
     offset += search.length<br />
     end = document.cookie.indexOf(";", offset)<br />
     if(end == -1) end = document.cookie.length<br />
     return unescape(document.cookie.substring(offset, end))<br />
   }<br />
   else return ""<br />
 }<br />
}<br />
&#47;**************&#47;<br />
&#47;&#47;--><br />
<&#47;script></p>
<div id="i"><&#47;div></p>
